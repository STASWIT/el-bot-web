(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{366:function(t,e,r){var content=r(428);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(13).default)("e8572512",content,!0,{sourceMap:!1})},427:function(t,e,r){"use strict";var n=r(366);r.n(n).a},428:function(t,e,r){(e=r(12)(!1)).push([t.i,".message-list-container{display:flex;align-items:flex-end;overflow-y:auto}.message-item,.message-list-container{justify-content:flex-end}",""]),t.exports=e},606:function(t,e,r){"use strict";r.r(e);var n=r(91),o=(r(11),r(7),r(5),r(4),r(8),r(2)),l=r(120),c=(r(22),r(150)),v={props:{id:{type:Number,default:0},type:{type:String,default:"qq"},size:{type:Number,default:100}},computed:{img:function(){return Object(c.a)(this.id,this.type,this.size)}}},d=r(48),m=r(65),f=r.n(m),_=r(118),h=r(132),component=Object(d.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-list-item-avatar",[e("v-img",{attrs:{src:this.img}})],1)}),[],!1,null,null,null),y=component.exports;function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}f()(component,{VImg:_.a,VListItemAvatar:h.a});var V={components:{ItemAvatar:y},data:function(){return{icons:n.a}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.b)("friends",["list"])),mounted:function(){this.$store.dispatch("friends/get")},methods:{setTarget:function(t){this.$store.commit("messages/setType","friend"),this.$store.commit("messages/setTarget",t)}}},x=r(84),I=r(57),j=r(134),w=r(73),k=Object(d.a)(V,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-list-item-group",{attrs:{color:"primary"}},t._l(t.list,(function(e){return r("v-list-item",{key:e.id,on:{click:function(r){return t.setTarget(e.id)}}},[r("item-avatar",{attrs:{id:e.id,type:"qq"}}),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{attrs:{title:e.id},domProps:{textContent:t._s(e.nickname)}})],1),t._v(" "),r("v-list-item-icon",[r("v-list-item-title",{domProps:{textContent:t._s(e.remark)}})],1)],1)})),1)}),[],!1,null,null,null),C=k.exports;f()(k,{VListItem:x.a,VListItemContent:I.a,VListItemGroup:j.a,VListItemIcon:w.a,VListItemTitle:I.b});function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var $={components:{ItemAvatar:y},data:function(){return{icons:n.a}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.b)("groups",["list"])),mounted:function(){this.$store.dispatch("groups/get")},methods:{setTarget:function(t){this.$store.commit("messages/setType","group"),this.$store.commit("messages/setTarget",t)},getColorByPermission:function(t){var e="gray";switch(t){case"OWNER":e="orange";break;case"ADMINISTRATOR":e="green";break;case"MEMBER":e="gray"}return e},getRoleByPermission:function(t){var e="gray";switch(t){case"OWNER":e="裙主";break;case"ADMINISTRATOR":e="🐶管理";break;case"MEMBER":e="人民群众"}return e}}},T=r(129),E=Object(d.a)($,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-list-item-group",{attrs:{color:"primary"}},t._l(t.list,(function(e){return r("v-list-item",{key:e.id,on:{click:function(r){return t.setTarget(e.id)}}},[r("item-avatar",{attrs:{id:e.id,type:"group"}}),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{attrs:{title:e.id},domProps:{textContent:t._s(e.name)}})],1),t._v(" "),r("v-list-item-icon",[r("v-icon",{attrs:{color:t.getColorByPermission(e.permission),title:t.getRoleByPermission(e.permission)}},[t._v("\n        "+t._s(t.icons.mdiAccount)+"\n      ")])],1)],1)})),1)}),[],!1,null,null,null),S=E.exports;f()(E,{VIcon:T.a,VListItem:x.a,VListItemContent:I.a,VListItemGroup:j.a,VListItemIcon:w.a,VListItemTitle:I.b});var B={components:{FriendList:C,GroupList:S},data:function(){return{icons:n.a,listName:"列表",switch:!1,activePanel:"groups"}}},L=r(613),D=r(145),M=r(340),R=r(130),A=r(333),N=r(35),F=r(155),U=Object(d.a)(B,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{attrs:{outlined:""}},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-toolbar-title",[t._v(t._s(t.listName))]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""}},[r("v-icon",[t._v("$mdiMagnify")])],1)],1),t._v(" "),r("v-list",{staticClass:"py-0",staticStyle:{overflow:"auto"},attrs:{height:"74vh"}},["friends"===t.activePanel?r("friend-list"):t._e(),t._v(" "),"groups"===t.activePanel?r("group-list"):t._e()],1),t._v(" "),r("v-bottom-navigation",{staticStyle:{"box-shadow":"none"},attrs:{shift:"",grow:"",color:"primary"},model:{value:t.activePanel,callback:function(e){t.activePanel=e},expression:"activePanel"}},[r("v-btn",{attrs:{value:"friends"}},[r("span",[t._v("好友列表")]),t._v(" "),r("v-icon",[t._v(t._s(t.icons.mdiAccount))])],1),t._v(" "),r("v-btn",{attrs:{value:"groups"}},[r("span",[t._v("群列表")]),t._v(" "),r("v-icon",[t._v(t._s(t.icons.mdiAccountMultiple))])],1)],1)],1)}),[],!1,null,null,null),z=U.exports;f()(U,{VBottomNavigation:L.a,VBtn:D.a,VCard:M.a,VIcon:T.a,VList:R.a,VSpacer:A.a,VToolbar:N.a,VToolbarTitle:F.a});var G={methods:{getAvatarById:c.a}},J=(r(427),r(133)),K=r(336),W=r(597),H=r(598),Q=Object(d.a)(G,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"message-list-container",attrs:{outlined:"",height:"55vh"}},[r("v-timeline",{staticStyle:{height:"55vh",overflow:"auto"},attrs:{dense:"","align-top":"",reverse:""}},t._l(t.$store.state.messages.list.slice(),(function(e,i){return r("v-timeline-item",{key:i,staticClass:"message-item",scopedSlots:t._u([{key:"icon",fn:function(){return[r("v-avatar",{attrs:{size:"40"}},[r("img",{attrs:{src:t.getAvatarById(t.$store.state.auth.qq,"qq",100)}})])]},proxy:!0},{key:"opposite",fn:function(){return[r("span",[t._v(t._s(e.sender.id))])]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),e.messageChain?r("v-card",[r("v-card-text",[t._v(t._s(e.messageChain[0].text))]),t._v(" "),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{attrs:{small:""},on:{click:function(r){return t.$store.dispatch("messages/recall",e.id)}}},[t._v("\n            撤回\n          ")])],1)],1):t._e()],1)})),1)],1)}),[],!1,null,null,null),X=Q.exports;f()(Q,{VAvatar:J.a,VBtn:D.a,VCard:M.a,VCardActions:K.a,VCardText:K.b,VTimeline:W.a,VTimelineItem:H.a});var Y={data:function(){return{icons:n.a,dialog:!1,url:""}},methods:{sendImageMessageByUrl:function(){this.$store.state.messages.target?(this.$store.dispatch("messages/image/send",[this.url]),this.dialog=!1):this.$toast.error("您这图要发给谁？")}}},Z=r(431),tt=r(599),et=r(434),at=r(383),st=Object(d.a)(Y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-list-item",t._g({},n),[r("v-list-item-title",[t._v("发送图片消息（通过链接）")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("图片链接")])]),t._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"链接","hide-details":"",required:""},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("关闭")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.sendImageMessageByUrl}},[t._v("\n        发送\n      ")])],1)],1)],1)}),[],!1,null,null,null),nt=st.exports;f()(st,{VBtn:D.a,VCard:M.a,VCardActions:K.a,VCardText:K.b,VCardTitle:K.c,VCol:Z.a,VDialog:tt.a,VListItem:x.a,VListItemTitle:I.b,VRow:et.a,VSpacer:A.a,VTextField:at.a});r(43);var it=r(10),ot={data:function(){return{dialog:!1,img:null,type:"group"}},methods:{uploadImage:function(){var t=this;return Object(it.a)(regeneratorRuntime.mark((function e(){var form;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(form=new FormData).append("sessionKey",t.$store.state.auth.sessionKey),form.append("type",t.type),form.append("img",t.img),e.next=6,t.$store.dispatch("messages/image/upload",form);case 6:t.dialog=!1;case 7:case"end":return e.stop()}}),e)})))()}}},lt=r(614),ct=r(601),ut=r(602),vt=Object(d.a)(ot,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-list-item",t._g({},n),[r("v-list-item-title",[t._v("上传图片")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("上传图片")])]),t._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-file-input",{attrs:{accept:"image/*","show-size":"",clearable:"",label:"来点色图？","hide-details":"","prepend-icon":"$mdiImage"},model:{value:t.img,callback:function(e){t.img=e},expression:"img"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-radio-group",{attrs:{row:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[r("v-radio",{attrs:{label:"群",value:"group"}}),t._v(" "),r("v-radio",{attrs:{label:"好友",value:"friend"}}),t._v(" "),r("v-radio",{attrs:{label:"临时",value:"temp"}})],1)],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("关闭")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.uploadImage}},[t._v("\n          发送\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null),mt=vt.exports;f()(vt,{VBtn:D.a,VCard:M.a,VCardActions:K.a,VCardText:K.b,VCardTitle:K.c,VCol:Z.a,VDialog:tt.a,VFileInput:lt.a,VListItem:x.a,VListItemTitle:I.b,VRadio:ct.a,VRadioGroup:ut.a,VRow:et.a,VSpacer:A.a});function pt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function gt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?pt(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):pt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ft={computed:gt(gt({},Object(l.b)("messages/image",["uploadInfo"])),{},{dialog:{get:function(){return this.$store.state.messages.image.dialog},set:function(t){this.$store.commit("messages/image/setDialog",t)}}})},bt=r(603),_t=Object(d.a)(ft,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":"600",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[t._v("\n      图片上传信息\n    ")]),t._v(" "),r("v-card-text",[r("v-form",{ref:"form"},[r("v-text-field",{attrs:{label:"ID",disabled:""},model:{value:t.uploadInfo.imageId,callback:function(e){t.$set(t.uploadInfo,"imageId",e)},expression:"uploadInfo.imageId"}}),t._v(" "),r("v-text-field",{attrs:{label:"路径",disabled:""},model:{value:t.uploadInfo.path,callback:function(e){t.$set(t.uploadInfo,"path",e)},expression:"uploadInfo.path"}}),t._v(" "),r("v-text-field",{attrs:{label:"链接",disabled:""},model:{value:t.uploadInfo.url,callback:function(e){t.$set(t.uploadInfo,"url",e)},expression:"uploadInfo.url"}})],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        关闭\n      ")])],1)],1)],1)}),[],!1,null,null,null),ht=_t.exports;f()(_t,{VBtn:D.a,VCard:M.a,VCardActions:K.a,VCardText:K.b,VCardTitle:K.c,VDialog:tt.a,VForm:bt.a,VSpacer:A.a,VTextField:at.a});var yt={components:{SendImageByUrl:nt,UploadImage:mt,UploadImageInfo:ht}},Ot=r(612),Vt=Object(d.a)(yt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-menu",{attrs:{top:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{icon:"",color:"primary",title:"发送图片"}},n),[r("v-icon",[t._v("$vuetify.icons.mdiImage")])],1)]}}])},[t._v(" "),r("v-list",{attrs:{dense:""}},[r("send-image-by-url"),t._v(" "),r("upload-image")],1)],1),t._v(" "),r("upload-image-info")],1)}),[],!1,null,null,null),xt=Vt.exports;f()(Vt,{VBtn:D.a,VIcon:T.a,VList:R.a,VMenu:Ot.a});var It={components:{SendImageMessage:xt},data:function(){return{icons:n.a,valid:!1,dialog:!1}},computed:{message:{get:function(){return this.$store.state.messages.message},set:function(t){this.$store.commit("messages/setMessage",t)}}},methods:{sendMessage:function(){this.message&&this.$store.dispatch("messages/send")}}},jt=r(604),wt=Object(d.a)(It,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("send-image-message")],1)],1),t._v(" "),r("v-form",{ref:"form",staticClass:"text-right"},[r("v-textarea",{attrs:{outlined:"",name:"message",placeholder:"想 BB 些什么？",counter:"",required:""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),r("v-btn",{attrs:{disabled:!t.message,color:"primary",block:""},on:{click:t.sendMessage}},[t._v("\n      发送\n    ")])],1)],1)}),[],!1,null,null,null),kt=wt.exports;f()(wt,{VBtn:D.a,VCol:Z.a,VForm:bt.a,VRow:et.a,VTextarea:jt.a});var Ct={middleware:"auth",components:{ContactList:z,MessageList:X,SendMessage:kt},head:{title:"控制台"}},Pt=Object(d.a)(Ct,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-row",{attrs:{dense:""}},[e("v-col",{attrs:{cols:"12",sm:"3"}},[e("contact-list")],1),this._v(" "),e("v-col",{attrs:{cols:"12",sm:"9"}},[e("v-col",{attrs:{cols:"12"}},[e("message-list"),this._v(" "),e("send-message")],1)],1)],1)}),[],!1,null,null,null);e.default=Pt.exports;f()(Pt,{VCol:Z.a,VRow:et.a})}}]);